<section class="page-card register-wrapper">
  <header class="register-header">
    <span class="welcome-badge">Join us</span>
    <h2>Create your account</h2>
    <p class="subtitle">Set up your profile to start tracking expenses effortlessly.</p>
  </header>

  <div *ngIf="errorMessage()" class="alert error">{{ errorMessage() }}</div>
  <div *ngIf="successMessage()" class="alert success">{{ successMessage() }}</div>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-field">
      <label for="username">Username</label>
      <input
        id="username"
        type="text"
        formControlName="username"
        autocomplete="username"
        placeholder="Choose a username"
        [class.invalid]="showFieldError('username')"
      />
      <span *ngIf="showFieldError('username')" class="field-error">
        {{ showFieldError('username') }}
      </span>
    </div>

    <div class="form-field">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        autocomplete="email"
        placeholder="you@example.com"
        [class.invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
      />
      <span *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="field-error">
        <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</span>
        <span *ngIf="registerForm.get('email')?.errors?.['email']">Enter a valid email address.</span>
      </span>
    </div>

    <div class="form-field">
      <label for="password">Password</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        autocomplete="new-password"
        placeholder="Create a password"
        [class.invalid]="showFieldError('password')"
      />
      <span *ngIf="showFieldError('password')" class="field-error">
        {{ showFieldError('password') }}
      </span>
    </div>

    <div class="form-field">
      <label for="confirmPassword">Confirm password</label>
      <input
        id="confirmPassword"
        type="password"
        formControlName="confirmPassword"
        autocomplete="new-password"
        placeholder="Confirm your password"
        [class.invalid]="showFieldError('confirmPassword')"
      />
      <span *ngIf="showFieldError('confirmPassword')" class="field-error">
        {{ showFieldError('confirmPassword') }}
      </span>
    </div>

    <button type="submit" class="submit-btn" [disabled]="isSubmitting()">
      <span *ngIf="!isSubmitting(); else loading">Create account</span>
    </button>
    <ng-template #loading>
      <span class="loading">Creating your account...</span>
    </ng-template>
  </form>

  <p class="login-copy">
    Already have an account?
    <a routerLink="/login">Sign in</a>
  </p>
</section>
